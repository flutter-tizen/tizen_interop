# tizen_interop

This package provides Dart bindings and utility functions for using Tizen native APIs.

## ❗ Experimental ❗

This package is in experimental stage. It is not intended for production use.
Only specific versions and profiles of Tizen are supported, and some binding APIs may be missing or have errors.


## Usage

To use this package, add `ffi` and `tizen_interop` as dependencies in your `pubspec.yaml` file.

```yaml
dependencies:
  ffi: ^1.1.2
  tizen_interop:
    git: https://github.com/flutter-tizen/tizen_interop
```

Then, import `package:ffi/ffi.dart` and `package:tizen_interop/[TIZEN_VERSION]/tizen.dart` in your Dart code.

```dart
import 'package:ffi/ffi.dart';
import 'package:tizen_interop/4.0/tizen.dart';
```

### Example
```dart
// Getting a string value from the Native API.
// Prefer using `arena` to allocate memory because it frees the memory
// automatically when the `using` block ends.
final appName = using((Arena arena) {
  Pointer<Pointer<Int8>> ppStr = arena();
  if (tizen.app_get_name(ppStr) == 0) {
    // The allocated memory in the Native API should be freed by the caller.
    arena.using(ppStr.value, calloc.free);
    return ppStr.value.toDartString();
  }
});

// Getting a integer value from the Native API.
final memSize = using((Arena arena) {
  Pointer<Int32> pMemSize = arena();
  if (tizen.runtime_info_get_physical_memory_size(pMemSize) == 0) {
    return pMemSize.value;
  }
});

// Getting a struct value from the Native API.
final memInfo = using((Arena arena) {
  Pointer<runtime_memory_info_s> pMemInfo = arena();
  if (tizen.runtime_info_get_system_memory_info(pMemInfo) == 0) {
    return pMemInfo.ref;
  }
});

// Passing a string value to the Native API.
final modelName = using((Arena arena) {
  Pointer<Pointer<Int8>> ppStr = arena();
  // The allocated memory by the `toNativeInt8` method should be freed by 
  // the caller. But `arena` allocator will free it automatically.
  final key =
      'http://tizen.org/system/model_name'.toNativeInt8(allocator: arena);
  if (tizen.system_info_get_platform_string(key, ppStr) == 0) {
    arena.using(ppStr.value, calloc.free);
    return ppStr.value.toDartString();
  }
});
```

Notice that the output value of [`app_get_name()`](https://docs.tizen.org/application/native/api/wearable/4.0/group__CAPI__APP__COMMON__MODULE.html#ga26b09c3080ccd8e32120bce697863268) is of `char *` type and must be released by the caller explicitly. If you're using IDEs like VS Code, you can hover your mouse over symbols or press `F12` to jump to their definitions and read API docs.


## Building from source

Install the following packages using Tizen Package Manager.
- `IOT-Headed-4.0-NativeAppDevelopment-CLI`
- `IOT-Headed-5.0-NativeAppDevelopment-CLI`
- `IOT-Headed-5.5-NativeAppDevelopment-CLI`
- `IOT-Headed-6.0-NativeAppDevelopment-CLI`

Then, run script files as follows. Dart bindings (`lib/src/.../generated_bindings.dart`) will be regenerated by [ffigen](https://pub.dev/packages/ffigen).

```sh
./scripts/copy_rootstraps.sh
./scripts/generate_bindings.sh
```


## Supported APIs
This package provides bindings of the following APIs of [Tizen Iot-Headed profile](https://docs.tizen.org/application/native/api/overview/):

_Note: UI and WebView related APIs are not provided._

| Category | Sub Category | Tizen 4.0 | Tizen 5.0 | Tizen 5.5 | Tizen 6.0 |
| -------- | -------- |:--------:|:--------:|:--------:|:--------:|
| Account | Account Manager | | ✔ | ✔ | ✔ |
| | FIDO Client | | ✔ | ✔ | ✔ |
| | Account Manager | | ✔ | ✔ | ✔ |
| | OAuth 2.0 | | ✔ | ✔ | ✔ |
| | Sync Manager | | ✔ | ✔ | ✔ |
| Application Framework | Application | ✔ | ✔ | ✔ | ✔ |
| | Alarm | ✔ | ✔ | ✔ | ✔ |
| | App Common | ✔ | ✔ | ✔ | ✔ |
| | App Control | ✔ | ✔ | ✔ | ✔ |
| | Event | ✔ | ✔ | ✔ | ✔ |
| | Internationalization | ✔ | ✔ | ✔ | ✔ |
| | Job scheduler | | ✔ | ✔ | ✔ |
| | Preference | ✔ | ✔ | ✔ | ✔ |
| | Resource Manager | ✔ | ✔ | ✔ | ✔ |
| | Application Manager | ✔ | ✔ | ✔ | ✔ |
| | Badge | ✔ | ✔ | ✔ | ✔ |
| | Bundle | ✔ | ✔ | ✔ | ✔ |
| | Data Control | ✔ | ✔ | ✔ | ✔ |
| | Message Port | ✔ | ✔ | ✔ | ✔ |
| | Notification | ✔ | ✔ | ✔ | ✔ |
| | Notification EX | | | ✔ | ✔ |
| | Package Manager | ✔ | ✔ | ✔ | ✔ |
| | RPC Port | | ✔ | ✔ | ✔ |
| | Service Application | ✔ | ✔ | ✔ | ✔ |
| | Shortcut | ✔ | ✔ | ✔ | ✔ |
| Base | Common Error | ✔ | ✔ | ✔ | ✔ |
| Content | Download | ✔ | ✔ | ✔ | ✔ |
| | MIME Type | ✔ | ✔ | ✔ | ✔ |
| | Media Content | ✔ | ✔ | ✔ | ✔ |
| | Activity Recognition | | ✔ | ✔ | ✔ |
| | Contextual History | | ✔ | ✔ | ✔ |
| | Contextual Trigger | | ✔ | ✔ | ✔ |
| | Gesture Recognition | | ✔ | ✔ | ✔ |
| Location | Geofence Manager | | ✔ | ✔ | ✔ |
| | Location Manager | | ✔ | ✔ | ✔ |
| Messaging | Email | ✔ | ✔ | ✔ | ✔ |
| | Messages | ✔ | | | |
| | Push | | ✔ | ✔ | ✔ |
| Multimedia | Audio I/O | ✔ | ✔ | ✔ | ✔ |
| | Camera | ✔ | ✔ | ✔ | ✔ |
| | Image Util | | ✔ | ✔ | ✔ |
| | Media Codec | ✔ | ✔ | ✔ | ✔ |
| | Media Controller | ✔ | ✔ | ✔ | ✔ |
| | Media Demuxer | ✔ | ✔ | ✔ | ✔ |
| | Media Muxer | ✔ | ✔ | ✔ | ✔ |
| | Media Streamer | ✔ | ✔ | ✔ | ✔ |
| | Media Tool | ✔ | ✔ | ✔ | ✔ |
| | Media Vision | ✔ | ✔ | ✔ | ✔ |
| | Metadata Editor | ✔ | ✔ | ✔ | ✔ |
| | Metadata Extractor | ✔ | ✔ | ✔ | ✔ |
| | Player | ✔ | ✔ | ✔ | ✔ |
| | Radio | | ✔ | ✔ | ✔ |
| | Recorder | ✔ | ✔ | ✔ | ✔ |
| | Screen Mirroring | | ✔ | ✔ | ✔ |
| | Sound Manager | ✔ | ✔ | ✔ | ✔ |
| | Sound Pool | ✔ | ✔ | ✔ | ✔ |
| | StreamRecorder | ✔ | ✔ | ✔ | ✔ |
| | Thumbnail Util | ✔ | ✔ | ✔ | ✔ |
| | Tone Player | ✔ | ✔ | ✔ | ✔ |
| | Video Util | ✔ | | | |
| | WAV Player | ✔ | ✔ | ✔ | ✔ |
| Network | Application Service Platform | | ✔ | ✔ | ✔ |
| | Bluetooth | ✔ | ✔ | ✔ | ✔ |
| | Connection | ✔ | ✔ | ✔ | ✔ |
| | DNSSD | ✔ | ✔ | ✔ | ✔ |
| | HTTP | | ✔ | ✔ | ✔ |
| | IoTCon | ✔ | ✔ | ✔ | ✔ |
| | MTP | ✔ | ✔ | ✔ | ✔ |
| | SSDP | ✔ | ✔ | ✔ | ✔ |
| | Smart Traffic Control | | ✔ | ✔ | ✔ |
| | Smartcard | ✔ | | | |
| | SoftAP | | ✔ | ✔ | ✔ |
| | VPN Service | | ✔ | ✔ | ✔ |
| | Wi-Fi Manager | ✔ | ✔ | ✔ | ✔ |
| | Wi-Fi Direct | | ✔ | ✔ | ✔ |
| Security | CSR | ✔ | ✔ | ✔ | ✔ |
| | Device Certificate Manager | | ✔ | ✔ | ✔ |
| | Device Policy Manager | ✔ | ✔ | ✔ | ✔ |
| | Key Manager | ✔ | ✔ | ✔ | ✔ |
| | Privacy Privilege Manager | ✔ | ✔ | ✔ | ✔ |
| | Privilege Info | ✔ | ✔ | ✔ | ✔ |
| | YACA | ✔ | ✔ | ✔ | ✔ |
| Social | Calendar | ✔ | ✔ | ✔ | ✔ |
| | Contacts | ✔ | ✔ | ✔ | ✔ |
| | Phonenumber utils | ✔ | ✔ | ✔ | ✔ |
| System | Device | ✔ | ✔ | ✔ | ✔ |
| | Diagnostics | | | | ✔ |
| | Dlog | ✔ | ✔ | ✔ | ✔ |
| | Feedback | ✔ | ✔ | ✔ | ✔ |
| | Media key | ✔ | ✔ | ✔ | ✔ |
| | Peripheral IO | ✔ | ✔ | ✔ | ✔ |
| | Runtime information | ✔ | ✔ | ✔ | ✔ |
| | Sensor | ✔ | ✔ | ✔ | ✔ |
| | Storage | ✔ | ✔ | ✔ | ✔ |
| | System Information | ✔ | ✔ | ✔ | ✔ |
| | System Settings | ✔ | ✔ | ✔ | ✔ |
| | T-trace | ✔ | ✔ | ✔ | ✔ |
| | USB Host | ✔ | ✔ | ✔ | ✔ |
| Telephony | Telephony Information | ✔ | | | |
| UI | Clipboard History Manager | ✔ | ✔ | ✔ | ✔ |
| | External Output Manager | ✔ | ✔ | ✔ | ✔ |
| | TBM Surface | ✔ | ✔ | ✔ | ✔ |
| UIX | Autofill | | |✔ | ✔ |
| | Input Method | ✔ | ✔ | ✔ | ✔ |
| | Input Method Manager | ✔ | ✔ | ✔ | ✔ |
| | Multi assistant | | ✔ | ✔ | ✔ |
| | STT | ✔ | ✔ | ✔ | ✔ |
| | STT Engine | ✔ | ✔ | ✔ | ✔ |
| | TTS | ✔ | ✔ | ✔ | ✔ |
| | TTS Engine | ✔ | ✔ | ✔ | ✔ |
| | Voice control | ✔ | ✔ | ✔ | ✔ |
| | Voice control engine | | ✔ | ✔ | ✔ |
| | Voice control manager | | | ✔ | ✔ |
